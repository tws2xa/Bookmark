<html>
<head>
    <!-- Jquery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/ColorScheme.js"></script>

    <script type="text/javascript" src = "js\DataFetcher.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/homepagecss.css">

    <!-- Make sure the user is a teacher -->
    <script type = "text/javascript">
        if(sessionStorage.studentId == null) {
            window.location.href = "./login.html";
        } else {
            var isTeacher = isTeacherId(sessionStorage.studentId);
            if(!isTeacher) {
                window.location.href = "./login.html";
            }
        }

        function submitNewAssignmentForm() {
            var assignmentName = $("#assignmentName").val();
            console.log("New Assignment: " + assignmentName);

            return false;
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("dragObjId", ev.target.id);
            console.log("ID: " + ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("dragObjId");
            ev.target.appendChild(document.getElementById(data));
        }

        function newTeam() {
            var defaultTxt = "";
            var teamName = window.prompt("Please Enter a Team Name: ",defaultTxt);

            if(teamName == null ) {
                return false;
            }
            if(teamName.trim() == "") {
                alert("Team Name Cannot Be Empty");
                return false;
            }

            $("#teamTbl thead tr:first").append("<th>" + teamName + "</th>");
            var colNum = $("#teamTbl thead tr:first th").size() - 1;
            $("#teamTbl thead tr:last").append("<td><button onclick='return teamNameChange(" + colNum + ")' class='form-control'>Change Name</button>");
            $("#teamTbl tbody tr").each(function(index, value) {
                $(value).append("<td ondrop='drop(event)' ondragover='allowDrop(event)'></td>");
            });
            return false;
        }

        function teamNameChange(colNum) {
            console.log("Changing Row: " + colNum)
            var defaultTxt = $("#teamTbl thead tr:first th:eq(" + colNum + ")").text();

            var teamName = window.prompt("Please Enter a Team Name: ", defaultTxt);

            if(teamName == null ) {
                return false;
            }
            if(teamName.trim() == "") {
                alert("Team Name Cannot Be Empty");
                return false;
            }

            $("#teamTbl thead tr:first th:eq(" + colNum + ")").html(teamName);
            return false;
        }

    </script>


  <title>New Assignment</title>
</head>
<body>
    <!-- Nav Bar -->
    <div class="nav">
        <div class = "container";>
            <ul class="pull-left">
                <a href="homepage.html">Home</a> 
                <a href="workshop.html">Workshop</a>
                <a href="play.html">Play</a>
                <a href="Board.html">Board</a>
           </ul>
            <ul class="pull-right">
                <a href="login.html">Login</a>
            </ul>
        </div>
    </div>

    <form>
        <!-- Title -->
        <div class="form-group col-sm-offset-1 col-lg-6">
            <h2>Create New Assignment</h2>
        </div>

        <!-- Assignment Name -->
        <div class="form-group col-sm-offset-1 col-sm-6">
            <label for="assignmentName">Assignment Name:</label>
            <input type="text" class="form-control" id="assignmentName" name="assignmentName" placeholder="Enter Assignment Name">
        </div>

        <!-- Deck Type -->
        <div class="form-group col-sm-offset-1 col-sm-6">
            <label>Deck Type:</label>
            <select class="form-control" id-="assignmentDeckType">
                <option value="SelectDeckType" disabled>Select Deck Type</option>
                <option value="Fiction">Fiction</option>
                <option value="Non-Fiction">Non-Fiction</option>
            </select>
        </div>

        <!-- Assignment Info -->
        <div class="form-group col-sm-offset-1 col-sm-6">
            <label for="assignmentInfo">Assignment Info:</label>
            <textarea class="form-control" rows="6" id="assignmentInfo" placeholder="Enter Assignment Information"></textarea>
        </div>

        <!-- Teams Table -->
        <div class="form-group col-sm-offset-1 col-sm-6">
            <label>Teams:</label>
            <input type="button" value="Add Team" class="form-control" onclick="return newTeam()">
            <br>
            <table class="stripeTbl" id="teamTbl">
                <!-- Header Row -->
                <thead>
                <tr>
                    <th>Unassigned Students</th>
                </tr>
                <tr>
                    <td></td>
                </tr>
                </thead>
                <tbody>
                <tr><td ondrop="drop(event)" ondragover="allowDrop(event)">
                    <label id="1121" draggable="true" ondragstart="drag(event)">1121</label>
                </td></tr>
                <tr><td ondrop="drop(event)" ondragover="allowDrop(event)">
                    <label id="1234" draggable="true" ondragstart="drag(event)">1234</label>
                </td></tr>
                <tr><td ondrop="drop(event)" ondragover="allowDrop(event)">
                    <label id="7826" draggable="true" ondragstart="drag(event)">7826</label>
                </td></tr>
                <tr><td ondrop="drop(event)" ondragover="allowDrop(event)">
                    <label id="5682" draggable="true" ondragstart="drag(event)">5682</label>
                </td></tr>
                <tr><td ondrop="drop(event)" ondragover="allowDrop(event)">
                    <label id="2363" draggable="true" ondragstart="drag(event)">2363</label>
                </td></tr>
                </tbody>
            </table>
        </div>

        <!-- Launch Assignment Button -->
        <div class="form-group col-sm-offset-1 col-sm-6">
            <input type="button" value = "Launch Assignment" class="btn btn-primary btn-md" onclick="return submitNewAssignmentForm()">
        </div>

    </form>
</body>
</html>